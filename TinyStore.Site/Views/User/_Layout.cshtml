<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>@TinyStore.Site.SiteContext.Config.SiteName</title>
    <partial name="Widgets/_Header"/>
</head>
<body class="bd-home">
<div id="q-app">
    <q-layout view="hHh lpR fFf" class="bg-grey-1">
        <q-header elevated class="bg-primary q-py-xs" style="height: 65px;line-height: 65px;">
            <q-toolbar class="fit">
                <q-btn
                    flat
                    dense
                    round
                    @@click="leftDrawerOpen = !leftDrawerOpen"
                    aria-label="菜单栏"
                    size="lg"
                    icon="menu">
                </q-btn>

                <img src="~/images/logo.png" alt="SiteContext.Config.SiteName" class="full-height"/>
                <q-toolbar-title shrink class="desktop-only">
                    @SiteContext.Config.SiteName
                </q-toolbar-title>

                <q-space></q-space>

                <div class="q-gutter-sm row items-center no-wrap">
                    <q-btn round dense flat color="grey-8" icon="apps" v-if="$q.screen.gt.sm">
                        <q-tooltip>Apps</q-tooltip>
                    </q-btn>
                    <q-btn round dense flat color="grey-8" icon="message" v-if="$q.screen.gt.sm">
                        <q-tooltip>Messages</q-tooltip>
                    </q-btn>
                    <q-btn round dense flat  icon="list">
                        <q-badge color="red" text-color="white" floating>
                            2
                        </q-badge>
                        <q-tooltip>订单</q-tooltip>
                    </q-btn>
                    <q-btn-dropdown split>
                          <template v-slot:label>
                            {{ storeCurrent.name }}
                          </template>
                          <q-list>
                            <q-item clickable v-close-popup @@click="test" v-for="store in storeList">
                              <q-item-section>
                                <q-item-label>{{store.name}}</q-item-label>
                              </q-item-section>
                            </q-item>
                          </q-list>
                    </q-btn-dropdown>
                </div>
            </q-toolbar>
        </q-header>

        <q-drawer
            v-model="leftDrawerOpen"
            show-if-above
            bordered
            content-class="bg-grey-2"
            :width="240">
            <q-scroll-area class="fit">
                <q-list padding>
                    <q-item-label header class="text-weight-bold text-uppercase">
                        货源
                    </q-item-label>
                                        
                    <q-item v-ripple clickable v-for="link in supplylinks" :key="link.text" @@click="Goto(link.url)" >
                        <q-item-section avatar>
                            <q-icon  color="grey-8" :name="link.icon"/>
                        </q-item-section>
                        <q-item-section>
                            <q-item-label class="text-h6 text-grey-8">{{ link.text }}</q-item-label>
                        </q-item-section>
                    </q-item>
                    
                    <q-separator class="q-my-md"></q-separator>
                    
                    <q-item-label header class="text-weight-bold text-uppercase">
                        商户
                    </q-item-label>
                    
                    <q-item v-ripple clickable v-for="link in userlinks" :key="link.text" @@click="Goto(link.url)" >
                        <q-item-section avatar>
                            <q-icon color="grey-8" :name="link.icon"/>
                        </q-item-section>
                        <q-item-section>
                            <q-item-label class="text-h6 text-grey-8">{{ link.text }}</q-item-label>
                        </q-item-section>
                    </q-item>

                    <q-separator class="q-my-md"></q-separator>
                    
                    <q-item-label header class="text-weight-bold text-uppercase">
                        店铺
                    </q-item-label>

                    <q-item v-ripple clickable v-for="link in storelinks" :key="link.text" @@click="Goto(link.url)">
                        <q-item-section avatar>
                            <q-icon color="grey-8" :name="link.icon"/>
                        </q-item-section>
                        <q-item-section>
                            <q-item-label class="text-h6 text-grey-8">{{ link.text }}</q-item-label>
                        </q-item-section>
                    </q-item>

                    <q-separator class="q-mt-md q-mb-lg"></q-separator>

                    <div class="q-px-md text-grey-9">
                        <div class="row items-center q-gutter-x-sm q-gutter-y-xs">
                            <a
                                v-for="button in buttons1"
                                :key="button.text"
                                class="YL__drawer-footer-link"
                                href="javascript:void(0)">
                                {{ button.text }}
                            </a>
                        </div>
                    </div>
                    <div class="q-py-md q-px-md text-grey-9">
                        <div class="row items-center q-gutter-x-sm q-gutter-y-xs">
                            <a
                                v-for="button in buttons2"
                                :key="button.text"
                                class="YL__drawer-footer-link"
                                href="javascript:void(0)">
                                {{ button.text }}
                            </a>
                        </div>
                    </div>
                </q-list>
            </q-scroll-area>
        </q-drawer>

        <q-page-container>
            @RenderBody()
        </q-page-container>
    </q-layout>
</div>
<partial name="Widgets/_BodyEnd"/>
<script>
    var _layout ={
     el: '#q-app',
     data : {
       leftDrawerOpen:true,
       user : Store.User(),
       userExtend : Store.UserExtend(),
       storeList : Store.StoreList(),
       storeCurrent : Store.StoreCurrent(),
       supplylinks: [
           { icon: 'person', text: '货源管理',url:'' },
           { icon: 'vpn_key', text: '卡密管理',url:''  },      
         ],
       userlinks: [
           { icon: 'person', text: '商户资料',url:'' },
           { icon: 'lock', text: '密码安全',url:'' },
           { icon: 'local_atm', text: '账目管理',url:'' },
           //{ icon: 'monetization_on', text: '提现管理' },     
           { icon: 'history', text: '操作日志',url:'' }
         ],
       storelinks: [
           { icon: 'store_mall_directory', text: '店铺资料',url:''  },
           { icon: 'card_travel', text: '商品管理',url:''  },
           { icon: 'local_grocery_store', text: '订单管理',url:''  },
         ],
         buttons1: [
           { text: 'About' },
           { text: 'Press' },
           { text: 'Copyright' },
           { text: 'Contact us' },
           { text: 'Creators' },
           { text: 'Advertise' },
           { text: 'Developers' }
         ],
         buttons2: [
           { text: 'Terms' },
           { text: 'Privacy' },
           { text: 'Policy & Safety' },
           { text: 'Test new features' }
         ]
     },
     beforeMount(){
         if(!Store.Token()){
             location.href = '@Url.ActionLink("Login", "User")';
         }
     },
     methods: {
         login (){
             console.log('login');
             // if (this.loginForm.account && this.loginForm.password){
             //     this.loginForm.loading = true;
             //     UserApi('login', {
             //         account: this.loginForm.account,
             //         password: this.loginForm.password
             //     })
             //     .then((response)=> {
             //         console.log(response.headers.token)
             //         if (response.data.code === 1){
             //             Store.Token(response.headers.token);
             //             Store.User(response.data.data.user);
             //             Store.UserExtend(response.data.data.userExtend);
             //             Store.StoreList(response.data.data.storeList);
             //             location.href = '@Url.ActionLink("Index", "User")';
             //         }
             //         else{
             //             Warning('帐号密码不匹配');
             //         }
             //         this.loginForm.loading = false;
             //     })
             //     .catch( (error)=> {
             //         this.loginForm.loading = false;
             //         Warning('接口通信错误');
             //         console.error(error);
             //     });
             // }else{
             //     Warning('请输入帐号&密码');
             // }
         }
     },
     // ...etc
   };
</script>
@RenderSection("Scripts", required: false)
</body>
</html>